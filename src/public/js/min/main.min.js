/**
 * @File main.js
 * @description Structuring in MCV
 */ /* window.onload = function () { */var data={editor:null},model={init:function(){},saveEditor:function(a){data.editor=a},getEditor:function(){return data.editor}},controller={init:function(){console.log("init controller"),controller.settingNavMenu(),controller.initSlider(),controller.initEditor(),controller.settingNavMenu(),view.init()},sendFormSignIn:function(a,b){axios.post("/Admin",{email:a,password:b}).then(function(a){console.log(a)}).catch(function(a){console.log(a)}).then(function(){// always executed
})},deleteProject:function(a){console.log(a),axios.delete("/Admin/ManageProjects",{params:{id:a}}).then(function(a){console.log(a),a.data.delete&&window.location.replace("/Admin/ManageProjects")}).catch(function(a){console.log(a)})},updateProject:function(a){axios.put("/Admin/EditProject",a,{headers:{"Content-Type":"multipart/form-data"}}).then(function(a){a.data.update&&window.location.replace("/Admin/ManageProjects")}).catch(function(a){console.log(a)})},addProject:function(a){axios.post("/Admin/AddProject",a,{headers:{"Content-Type":"multipart/form-data"}}).then(function(a){a.data.add&&window.location.replace("/Admin/ManageProjects")}).catch(function(a){console.log(a)})},savePost:function(a){axios.post("/Admin/SavePost",a,{headers:{"Content-Type":"multipart/form-data"}}).then(function(a){console.log(a.data.save),a.data.save&&window.location.replace("/Admin/ManageProjects")}).catch(function(a){console.log(a)})},getCookie:function(a){let b=a+"=",c=decodeURIComponent(document.cookie),d=c.split(";");for(i=0;i<d.length;i++){let a=d[i];for(;" "==a.charAt(0);)a=a.substring(1);if(0==a.indexOf(b))return a.substring(b.length,a.length)}return""},checkCookie:function(a){let b=controller.getCookie(a);return""!=b},onChange:function(a){/* let file = event.target.files[0];
    let reader = new FileReader();
    console.log(event.target.files);
    reader.onload = function(e) {
      // The file's text will be printed here
      console.log(e.target.result);
      view.getImage().src = e.target.result;
    };
    reader.readAsDataURL(file);
    view.getImage().img = file; */ /* let files = event.target.files;
    console.log(files);
    view.getImage().files = files; */ /* Preview with of images */let b=view.getContPreViewImages();b.innerHTML="";let c=a.target.files;for(let d,e=0;e<c.length;e++)d=new FileReader,d.onload=function(a){console.log(a.target.result),view.getImage().src=a.target.result;let c=document.createElement("img");c.src=a.target.result,b.appendChild(c)},d.readAsDataURL(c[e])},initSlider:function(){console.log("init slider");new Swiper(".swiper-container",{slidesPerView:1,spaceBetween:0,centeredSlides:!0,centeredSlidesBounds:!0,breakpoints:{// min width is >= 576px
576:{slidesPerView:"auto",spaceBetween:5}},loop:!0,loopFillGroupWithBlank:!0,autoplay:{delay:2e3},pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}})},initEditor:function(){try{let a=new Quill("#editor",{modules:{toolbar:[[{header:[1,2,3,4,5,6,!1]}],[{size:["small",!1,"large","huge"]}],// custom dropdown
["bold","italic","underline"],// toggled buttons
[{list:"ordered"},{list:"bullet"}],[{color:[]},{background:[]}],// dropdown with defaults from theme
[{font:[]}],[{align:[]}],["image","blockquote","code-block"]]},placeholder:"Compose an epic...",theme:"snow"});console.log(a),model.saveEditor(a)}catch(a){console.log(a)}},getEditor:function(){return model.getEditor()},settingNavMenu:function(){let a=document.getElementById("nav-menu"),b=a.getElementsByClassName("nav-item"),c=window.location.pathname.split("/")[1];Array.from(b).forEach(a=>{let b=a.getElementsByClassName("nav-link")[0].getAttribute("href").split("/")[1];b==c?a.classList.add("active"):a.classList.contains("active")&&a.classList.remove("active")})}},view={init:function(){console.log("init view"),view.eventSendFormSignIn(),view.eventShowInputNewPassword(),view.eventDeleteProject(),view.eventUpdateProject(),view.showAdminView(),view.eventAddProject(),view.eventPaginationBlogNext(),view.eventPaginationBlogPrevious(),view.eventSaveProcessForm(),view.processDeltaToHtml(),view.loadDeltaToEditor(),view.eventShowBlockList()},getEmail:function(){try{return document.getElementById("inputEmail").value}catch(a){console.log(a)}},getPassword:function(){try{return document.getElementById("inputPassword").value}catch(a){console.log(a)}},getCheckNewPassword:function(){try{return document.getElementById("checkNewPassword")}catch(a){console.log(a)}},getFormGroupNewPassword:function(){try{return document.getElementById("form-group-new-password")}catch(a){console.log(a)}},getTitle:function(){try{return document.getElementById("inputTitle").value}catch(a){console.log(a)}},getUrlGitHub:function(){try{return document.getElementById("inputUrlGitHub").value}catch(a){console.log(a)}},getUrlWebSite:function(){try{return document.getElementById("inputUrlWebSite").value}catch(a){console.log(a)}},getUrlImage:function(){try{return document.getElementById("inputUrlImage").value}catch(a){console.log(a)}},getImage:function(){try{return document.getElementById("inputImage")}catch(a){console.log(a)}},getDescription:function(){try{return document.getElementById("inputDescription").value}catch(a){console.log(a)}},getProjectId:function(){try{return document.getElementById("inputProjectId").value}catch(a){console.log(a)}},getContPreViewImages:function(){try{return document.getElementById("contPreViewImages")}catch(a){console.log(a)}},getPaginationBlogNext:function(){try{return document.getElementById("next")}catch(a){console.log(a)}},getPaginationBlogPrevious:function(){try{return document.getElementById("previous")}catch(a){console.log(a)}},eventSendFormSignIn:function(){try{let a=document.getElementById("signIn");a.addEventListener("click",a=>{let b=view.getEmail(),c=view.getPassword();a.preventDefault(),controller.sendFormSignIn(b,c)})}catch(a){console.log(a)}},eventShowInputNewPassword:function(){try{/* Hide the new password field */let a=view.getCheckNewPassword(),b=view.getFormGroupNewPassword();a.addEventListener("click",()=>{a.checked?(a.value=!1,b.style.display="block"):(a.value=!0,b.style.display="none")})}catch(a){console.log(a)}},eventDeleteProject:function(){},eventUpdateProject:function(){try{let a=document.getElementById("updateProject");a.addEventListener("click",function(a){a.preventDefault(),console.log(view.getImage().files);let b=new FormData;b.append("id",view.getProjectId()),b.append("title",view.getTitle()),b.append("github",view.getUrlGitHub()),b.append("website",view.getUrlWebSite());for(let c=0;c<view.getImage().files.length;c++)b.append(`images`,view.getImage().files[c]);b.append("description",view.getDescription()),controller.updateProject(b),console.log("Update project")})}catch(a){console.log(a)}},eventAddProject:function(){try{let a=document.getElementById("addProject");a.addEventListener("click",function(a){a.preventDefault(),console.log(view.getImage().files);let b=new FormData;b.append("title",view.getTitle()),b.append("github",view.getUrlGitHub()),b.append("website",view.getUrlWebSite()),b.append("image",view.getImage().src),b.append("description",view.getDescription()),b.append("images",view.getImage().files),controller.addProject(b),console.log("Add project")})}catch(a){console.log(a)}},eventSaveProcessForm:function(){try{let a=document.getElementsByClassName("btn-save");Array.from(a).forEach(a=>{a.addEventListener("click",function(){var a=new FormData;let b=this.getAttribute("id-form"),c=document.getElementById(b),d=c.getElementsByClassName("process-form");Array.from(d).forEach(b=>{let c=b.getAttribute("name"),d=b.value;b.classList.contains("editor")&&(d=JSON.stringify(controller.getEditor().getContents())),a.append(c,d)}),controller.savePost(a)})})}catch(a){console.log(a)}},processDeltaToHtml:function(){try{let a=document.getElementsByClassName("delta");Array.from(a).forEach(a=>{let b=JSON.parse(a.getAttribute("value")),c=document.createElement("div"),d=new Quill(c,{});if(d.setContents(b.ops),a.classList.contains("delta-summary")){/* console.log(contTemp.getElementsByTagName('blockquote')[0].innerHTML); */let b=c.getElementsByTagName("blockquote")[0];b&&(a.innerHTML=b.innerHTML)}else a.innerHTML=d.root.innerHTML})}catch(a){console.log(a)}},loadDeltaToEditor:function(){try{let a=document.getElementsByClassName("editor");Array.from(a).forEach(a=>{a.classList.contains("load-delta")&&a.getAttribute("value")&&controller.getEditor().setContents(JSON.parse(a.getAttribute("value")))})}catch(a){console.log(a)}},/* eventSeePostDetail: function (id){
    window.location.replace("/Blog/Post/"+id);
  }, */showAdminView:function(){controller.checkCookie("token")&&(document.getElementById("adminMenu").style.display="list-item")},eventPaginationBlogNext:function(){try{let a=view.getPaginationBlogNext();a.addEventListener("click",a=>{a.preventDefault();let b=window.location.pathname,c=b.split("/")[b.split("/").length-1];console.log("Pagination: "+(parseInt(c)+1)),window.location.replace("/Blog/"+(parseInt(c)+1))})}catch(a){console.log(a)}},eventPaginationBlogPrevious:function(){try{let a=view.getPaginationBlogPrevious();a.addEventListener("click",a=>{a.preventDefault();let b=window.location.pathname,c=b.split("/")[b.split("/").length-1];c=parseInt(c)-1,0<c&&(console.log("Pagination: "+c),window.location.replace("/Blog/"+c))})}catch(a){console.log(a)}},eventShowBlockList:function(){let a=document.getElementsByClassName("block-list-toggle");Array.from(a).forEach(a=>{var b=a.getAttribute("list-id"),c=document.getElementById(b);0<c.clientHeight&&(c.setAttribute("block-list-height",c.clientHeight),"visible"==c.getAttribute("init_state")?(c.style.visibility="visible",c.style.height=c.clientHeight+"px"):(c.style.visibility="hidden",c.style.height="0")),a.addEventListener("click",()=>{/* console.log(toggle); */let b=a.getElementsByTagName("i")[0];console.log(b);/* let list_id = toggle.getAttribute("list-id"); */ /* console.log(list_id); */ /* let list = document.getElementById(list_id); */ /* console.log(list); */let d=c.getAttribute("block-list-height");/* console.log(list_height); */console.log(c.style.visibility),"hidden"==c.style.visibility||""==c.style.visibility?(c.style.visibility="visible",c.style.height=d+"px",b.classList.remove("fa-caret-down"),b.classList.add("fa-caret-up")):(c.style.visibility="hidden",c.style.height="0",b.classList.remove("fa-caret-up"),b.classList.add("fa-caret-down"))})})}};/* MODEL */controller.init();
//# sourceMappingURL=main.min.js.map
