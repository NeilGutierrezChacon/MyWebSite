<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="robots" content="noindex">
    <title>JSDoc: Source: public/js/min/main.min.js</title>

    <script src="/docs/scripts/prettify/prettify.js"> </script>
    <script src="/docs/scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="/docs/styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="/docs/styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: public/js/min/main.min.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @File main.js
 * @description Structuring in MCV
 */ /* window.onload = function () { */var data={editor:null,nextProjects:{nextContent:"",hasNextPage:!0,nextPage:2}},model={init:function(){},saveEditor:function(a){data.editor=a},getEditor:function(){return data.editor},loadNextProjects:async function(a=1){await axios.get("/projects/pagination/"+a).then(a=>{data.nextProjects=a.data}).catch(a=>{console.log(a)})}},controller={init:function(){/* console.log("init controller"); */controller.settingNavMenu(),controller.initSlider(),controller.initEditor(),controller.settingNavMenu(),view.init()},deleteProject:function(a){axios.post("/admin/manage-projects/"+a+"/delete",{params:{id:a}}).then(function(a){a.data.delete&amp;&amp;window.location.replace("/admin/manage-projects")}).catch(function(a){console.log(a)})},getCookie:function(a){let b=a+"=",c=decodeURIComponent(document.cookie),d=c.split(";");for(i=0;i&lt;d.length;i++){let a=d[i];for(;" "==a.charAt(0);)a=a.substring(1);if(0==a.indexOf(b))return a.substring(b.length,a.length)}return""},checkCookie:function(a){let b=controller.getCookie(a);return""!=b},/**
   * @function preViewImages
   * @description Show a pre view of images upload in a input file type 
   * @param {*} event Evento upload image.
   */preViewImages:function(a){let b=view.getContPreViewImages();if(b){b.innerHTML="";let c=a.target.files;for(let a,d=0;d&lt;c.length;d++)a=new FileReader,a.onload=function(a){// The file's text will be printed here
/* console.log(e.target.result); */let c=view.getInputImage();c&amp;&amp;(c.src=a.target.result);let d=document.createElement("img");d.src=a.target.result,b.appendChild(d)},a.readAsDataURL(c[d])}},/**
   * @function initSlider
   * @description look for all elements with class "swiper-container" 
   * if the element has a "type-slider" attribute the slider starts with 
   * this type otherwise the slider starts with the default settings.
   * Supported type: 3D-coverflow.
   */initSlider:function(){let a=document.getElementsByClassName("swiper-container");Array.from(a).forEach(a=>{let b,c=a.getAttribute("type-slider");switch(c){case"3D-coverflow":b={effect:"coverflow",grabCursor:!0,centeredSlides:!0,centeredSlidesBounds:!0,loop:!0,loopFillGroupWithBlank:!0,slidesPerView:"auto",coverflowEffect:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!0},pagination:{el:".swiper-pagination"}};break;default:b={slidesPerView:1,spaceBetween:0,centeredSlides:!0,centeredSlidesBounds:!0,breakpoints:{// min width is >= 576px
576:{slidesPerView:"auto",spaceBetween:5}},loop:!0,loopFillGroupWithBlank:!0,autoplay:{delay:2e3},pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}};}new Swiper(a,b)})},/**
   * @function initEditor
   * @description Find the first element with id "Editor" and started a quill editor
   * with default config.
   */initEditor:function(){let a=document.querySelector("#editor");a&amp;&amp;(a=new Quill(a,{modules:{toolbar:[[{header:[1,2,3,4,5,6,!1]}],[{size:["small",!1,"large","huge"]}],// custom dropdown
["bold","italic","underline"],// toggled buttons
[{list:"ordered"},{list:"bullet"}],[{color:[]},{background:[]}],// dropdown with defaults from theme
[{font:[]}],[{align:[]}],["image","blockquote","code-block"]]},placeholder:"Compose an epic...",theme:"snow"}),model.saveEditor(a))},getEditor:function(){return model.getEditor()},/**
   * @function settingNavMenu
   * @description Add the "active" class when the page URL is equal 
   * to the href of the menu item link and removed the "active" class when it is
   * not equal.
   */settingNavMenu:function(){let a=document.querySelector("#nav-menu");if(a){let b=a.getElementsByClassName("nav-item"),c=window.location.pathname.split("/")[1];Array.from(b).forEach(a=>{let b=a.getElementsByClassName("nav-link")[0].getAttribute("href").split("/")[1];b==c?a.classList.add("active"):a.classList.contains("active")&amp;&amp;a.classList.remove("active")})}},nextProjects:async function(){data.nextProjects.hasNextPage&amp;&amp;(await model.loadNextProjects(data.nextProjects.nextPage),view.drawNextProjects(data.nextProjects.nextContent))}},view={init:function(){/* console.log("init view"); */view.eventShowInputNewPassword(),view.showAdminView(),view.eventPaginationBlogNext(),view.eventPaginationBlogPrevious(),view.processDeltaToHtml(),view.loadDeltaToEditor(),view.eventShowBlockList(),view.saveFormWithQuillEditor(),view.eventFinalScroll()},getInputImage:function(){return document.querySelector("#inputImage")},getContPreViewImages:function(){return document.querySelector("#contPreViewImages")},/**
   * @function eventShowInputNewPassword
   * @description show the input to new password
   */eventShowInputNewPassword:function(){let a=document.querySelector("#checkNewPassword");a&amp;&amp;a.addEventListener("click",()=>{let b=document.querySelector("#form-group-new-password");a.checked?(a.value=!1,b.style.display="block"):(a.value=!0,b.style.display="none")})},/**
   * @function processDeltaToHtml
   * @description Find all elements with class "delta", need a value
   * attribute with the content in delta format, create a quill container
   * in the DOM to be pre-processed in html format. If the element has a
   * "delta-summary" class, it will take the text in "blockquote" format
   * and take it as a summary of the content. 
   */processDeltaToHtml:function(a=document){try{let b=a.getElementsByClassName("delta");Array.from(b).forEach(a=>{/* console.log(delta); */if(a.getAttribute("value")){let b=JSON.parse(a.getAttribute("value")),c=document.createElement("div"),d=new Quill(c,{});/* console.log(inputDelta); */if(d.setContents(b.ops),a.classList.contains("delta-summary")){let b=c.getElementsByTagName("blockquote")[0];b&amp;&amp;(a.innerHTML=b.innerHTML)}else a.innerHTML=d.root.innerHTML;a.setAttribute("value","")}})}catch(a){console.log(a)}},/**
   *  @function loadDeltaToEditor
   *  @description Finds all the elements that contain the class "editor"
   *  and if these elements have the class "load-delta" and a "value" attribute
   *  will load the content to the quill text editor in delta format.
   */loadDeltaToEditor:function(){try{let a=document.getElementsByClassName("editor");Array.from(a).forEach(a=>{a.classList.contains("load-delta")&amp;&amp;a.getAttribute("value")&amp;&amp;controller.getEditor().setContents(JSON.parse(a.getAttribute("value")))})}catch(a){console.log(a)}},/**
   * @function showAdminView
   * @description Show the "admin" navigation item if you have token
   * authentication.
   */showAdminView:function(){if(controller.checkCookie("token")){let a=document.getElementsByClassName("control-admin");Array.from(a).forEach(a=>{a.style.display="block";let b=a.getElementsByClassName("toggle-admin")[0];b.addEventListener("click",()=>{let b=a.getElementsByClassName("menu-admin")[0];b.classList.contains("active")?b.classList.remove("active"):b.classList.add("active")})})}},/**
   * @function saveFormWithQuillEditor
   * @description Load the content of the quill editor in an input tag
   * to send the content with the form.
   */saveFormWithQuillEditor:function(){var a=document.querySelector(".form-quill");a&amp;&amp;(a.onsubmit=function(){var a=document.querySelector("input[name=content]");a.value=JSON.stringify(controller.getEditor().getContents())})},eventPaginationBlogNext:function(){let a=document.querySelector("#next");a&amp;&amp;a.addEventListener("click",a=>{a.preventDefault();let b=window.location.pathname,c=b.split("/")[b.split("/").length-1];window.location.replace("/Blog/"+(parseInt(c)+1))})},eventPaginationBlogPrevious:function(){let a=document.querySelector("#previous");a&amp;&amp;a.addEventListener("click",a=>{a.preventDefault();let b=window.location.pathname,c=b.split("/")[b.split("/").length-1];c=parseInt(c)-1,0&lt;c&amp;&amp;window.location.replace("/Blog/"+c)})},/**
   * @function eventShowBlockList
   * @description Search all elements with class "block-list-toggle" and attribute 
   * list-id with id of the list to control, then if the list has an "init_state" 
   * attribute equal to "visible" shows the list otherwise, hide the list and 
   * add block-list-height attribute with your default height, 
   * then add a click event to the toggle item to display or hide the list.
   * 
   */eventShowBlockList:function(){let a=document.querySelectorAll(".block-list-toggle[list-id]");Array.from(a).forEach(a=>{var b=a.getAttribute("list-id"),c=document.querySelector("#"+b);c&amp;&amp;(0&lt;c.clientHeight&amp;&amp;(c.setAttribute("block-list-height",c.clientHeight),"visible"==c.getAttribute("init_state")?(c.style.visibility="visible",c.style.height=c.clientHeight+"px"):(c.style.visibility="hidden",c.style.height="0")),a.addEventListener("click",()=>{let b=a.getElementsByTagName("i")[0],d=c.getAttribute("block-list-height");"hidden"==c.style.visibility||""==c.style.visibility?(c.style.visibility="visible",c.style.height=d+"px",b.classList.remove("fa-caret-down"),b.classList.add("fa-caret-up")):(c.style.visibility="hidden",c.style.height="0",b.classList.remove("fa-caret-up"),b.classList.add("fa-caret-down"))}))})},drawNextProjects:function(a){let b=document.querySelector(".page-projects");if(b){let c=b.getElementsByClassName("card-deck-projects")[0];c.innerHTML+=a,view.processDeltaToHtml(c)}},eventFinalScroll:function(){window.onscroll=function(){window.innerHeight+window.scrollY>=document.body.scrollHeight&amp;&amp;controller.nextProjects()}}};/* MODEL */controller.init();
var notUsed={savePost:function(a){axios.post("/admin/save-post",a,{headers:{"Content-Type":"multipart/form-data"}}).then(function(a){console.log(a.data.save),a.data.save&amp;&amp;window.location.replace("/admin/manage-projects")}).catch(function(a){console.log(a)})},eventSaveProcessForm:function(){try{let a=document.getElementsByClassName("btn-save");Array.from(a).forEach(a=>{a.addEventListener("click",function(){var a=new FormData;let b=this.getAttribute("id-form"),c=document.getElementById(b),d=c.getElementsByClassName("process-form");Array.from(d).forEach(b=>{let c=b.getAttribute("name"),d=b.value;b.classList.contains("editor")&amp;&amp;(d=JSON.stringify(controller.getEditor().getContents())),a.append(c,d)}),controller.savePost(a)})})}catch(a){console.log(a)}},eventSendFormLogIn:function(){try{let a=document.getElementById("logIn");a.addEventListener("click",a=>{let b=view.getEmail(),c=view.getPassword();a.preventDefault(),controller.sendFormLogIn(b,c)})}catch(a){console.log(a)}},getEmail:function(){try{return document.getElementById("inputEmail").value}catch(a){console.log(a)}},getPassword:function(){try{return document.getElementById("inputPassword").value}catch(a){console.log(a)}},onChange:function(a){/* let file = event.target.files[0];
        let reader = new FileReader();
        console.log(event.target.files);
        reader.onload = function(e) {
          // The file's text will be printed here
          console.log(e.target.result);
          view.getImage().src = e.target.result;
        };
        reader.readAsDataURL(file);
        view.getImage().img = file; */ /* let files = event.target.files;
        console.log(files);
        view.getImage().files = files; */ /* Preview with of images */let b=view.getContPreViewImages();b.innerHTML="";let c=a.target.files;for(let d,e=0;e&lt;c.length;e++)d=new FileReader,d.onload=function(a){console.log(a.target.result),view.getImage().src=a.target.result;let c=document.createElement("img");c.src=a.target.result,b.appendChild(c)},d.readAsDataURL(c[e])},eventUpdateProject:function(){try{let a=document.getElementById("updateProject");a.addEventListener("click",function(a){a.preventDefault(),console.log(view.getImage().files);let b=new FormData;b.append("id",view.getProjectId()),b.append("title",view.getTitle()),b.append("github",view.getUrlGitHub()),b.append("website",view.getUrlWebSite());for(let c=0;c&lt;view.getImage().files.length;c++)b.append(`images`,view.getImage().files[c]);b.append("description",view.getDescription()),controller.updateProject(b),console.log("Update project")})}catch(a){console.log(a)}},getProjectId:function(){try{return document.getElementById("inputProjectId").value}catch(a){console.log(a)}},getDescription:function(){try{return document.getElementById("inputDescription").value}catch(a){console.log(a)}},getUrlImage:function(){try{return document.getElementById("inputUrlImage").value}catch(a){console.log(a)}},getTitle:function(){try{return document.getElementById("inputTitle").value}catch(a){console.log(a)}},getUrlWebSite:function(){try{return document.getElementById("inputUrlWebSite").value}catch(a){console.log(a)}},getUrlGitHub:function(){try{return document.getElementById("inputUrlGitHub").value}catch(a){console.log(a)}},eventAddProject:function(){try{let a=document.getElementById("addProject");a.addEventListener("click",function(a){a.preventDefault(),console.log(view.getImage().files);let b=new FormData;b.append("title",view.getTitle()),b.append("github",view.getUrlGitHub()),b.append("website",view.getUrlWebSite()),b.append("image",view.getImage().src),b.append("description",view.getDescription()),b.append("images",view.getImage().files),controller.addProject(b),console.log("Add project")})}catch(a){console.log(a)}},addProject:function(a){axios.post("/Admin/AddProject",a,{headers:{"Content-Type":"multipart/form-data"}}).then(function(a){a.data.add&amp;&amp;window.location.replace("/Admin/ManageProjects")}).catch(function(a){console.log(a)})},updateProject:function(a){axios.put("/Admin/EditProject",a,{headers:{"Content-Type":"multipart/form-data"}}).then(function(a){a.data.update&amp;&amp;window.location.replace("/Admin/ManageProjects")}).catch(function(a){console.log(a)})},sendFormLogIn:function(a,b){console.log("-- not used --"),axios.post("/admin",{email:a,password:b}).then(function(a){console.log(a)}).catch(function(a){console.log(a)}).then(function(){// always executed
})}};
//# sourceMappingURL=main.min.js.map
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Documentation | NGCH43 </a></h2><h3>Global</h3><ul><li><a href="global.html#calcBlogPag">calcBlogPag</a></li><li><a href="global.html#dotenv">dotenv</a></li><li><a href="global.html#drawNextProjects">drawNextProjects</a></li><li><a href="global.html#eventFinalScroll">eventFinalScroll</a></li><li><a href="global.html#eventShowBlockList">eventShowBlockList</a></li><li><a href="global.html#eventShowInputNewPassword">eventShowInputNewPassword</a></li><li><a href="global.html#initEditor">initEditor</a></li><li><a href="global.html#initSlider">initSlider</a></li><li><a href="global.html#loadDeltaToEditor">loadDeltaToEditor</a></li><li><a href="global.html#loadNextProjects">loadNextProjects</a></li><li><a href="global.html#nextProjects">nextProjects</a></li><li><a href="global.html#preViewImages">preViewImages</a></li><li><a href="global.html#processDeltaToHtml">processDeltaToHtml</a></li><li><a href="global.html#reduceTextDescription">reduceTextDescription</a></li><li><a href="global.html#saveFormWithQuillEditor">saveFormWithQuillEditor</a></li><li><a href="global.html#settingNavMenu">settingNavMenu</a></li><li><a href="global.html#showAdminView">showAdminView</a></li><li><a href="global.html#uploadFromBuffer">uploadFromBuffer</a></li><li><a href="global.html#verifyToken">verifyToken</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.5</a> on Thu Oct 08 2020 12:34:58 GMT+0200 (hora de verano de Europa central)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
